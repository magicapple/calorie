# 健康管理H5应用 - 产品需求文档 (PRD)

**版本**: 1.0
**日期**: 2025-07-01

## 1. 背景

用户希望管理自己的日常饮食和健康数据。核心场景是：每周在超市集中采购食材后，将食材信息录入系统，形成一个“个人食材库”。在每天做饭或吃饭时，从库中选择消耗的食材进行记录。同时，用户会通过运动手表、体脂秤等设备获取身体数据，希望将这些数据与饮食记录结合，获得全面的健康分析和建议，特别是关于能量平衡和抗炎饮食方面的指导。

## 2. 产品愿景

开发一款以“食材库”为核心的、支持离线使用的PWA（渐进式网络应用）。它不仅能帮助用户轻松记录和追踪每日营养摄入，还能结合用户的个人身体指标，提供关于能量平衡、营养素配比及抗炎饮食的智能化分析和建议，赋能用户实现更科学的健康管理。

## 3. 功能需求 (V1.0)

### 3.1. 个人健康档案 (Personal Profile)

管理用户的个人基础信息和身体指标。

- **数据字段**:
  - **基础信息**: 性别, 年龄, 身高 (cm)。
  - **身体指标**: 体重 (kg), 体脂率 (%), 静息消耗 (kcal, BMR)。
  - **运动消耗**: 用户可手动录入当日的动态消耗 (Active Calories, kcal)。
- **功能**: 用户可随时更新数据，这些数据是所有计算和建议的基础。

### 3.2. 食物营养数据库 (Food Database)

应用内置一个标准化的食物营养信息库。

- **核心设计**:
  - **默认单位**: 每种食物都有一个“自然单位”（如: 克, 个, 根, 毫升）。
  - **单位换算**: 对于非“克”的单位，系统会预设一个平均“单位克重” (g/unit)，用于将个数、根数等换算为统一的克重进行营养计算。例如：1个鸡蛋 ≈ 55g。

- **数据结构 (每种食物)**:
  - **标识**: `id`, `name`
  - **单位**: `default_unit` (e.g., 'g', '个'), `grams_per_unit` (e.g., 1, 55)
  - **分类**: `category` (e.g., 蔬菜, 水果, 肉类)
  - **核心营养素 (每100g)**: `calories`, `protein`, `carbohydrate`, `fat`
  - **扩展营养素 (每100g)**: `fiber`, `vitamins`, `minerals`
  - **抗炎指标**: `is_anti_inflammatory` (boolean), `anti_inflammatory_compounds` (tags), `dii_score` (number, optional)

- **初始数据**: 内置一个 `JSON` 文件，覆盖用户提供的常见食材列表（已去重整理）。
常见食物列表：
- 鸡蛋 单位 个
- 脱脂奶粉 单位 克
- 苹果 单位 个
- 蓝莓 单位 克
- 芒果 单位 个
- 香蕉 单位 个
- 桃子 单位 个
- 梨 单位 个
- 西瓜 单位 个
- 哈密瓜 单位 个
- 葡萄 单位 串
- 草莓 单位 盒
- 樱桃 单位 盒
- 牛腱子肉 单位 克
- 鸡胸肉 单位 克
- 排骨 单位 克
- 全麦粉 单位 克
- 糙米 单位 克
- 土豆 单位 个 
- 豆腐 单位 克
- 紫薯 单位 个
- 红薯 单位 个
- 玉米 单位 个
- 胡萝卜 单位 个
- 西兰花 单位 个
- 白菜花 单位 个
- 菠菜 单位 克
- 胡萝卜 单位 个
- 菠菜 单位 克
- 包菜 单位 个
- 芹菜 单位 根
- 豇豆 单位 根
- 白不老 单位 根
- 油豆角 单位 根
- 扁豆 单位 根
- 豆角 单位 根
- 四季豆 单位 根
- 荷兰豆 单位 根
- 豌豆 单位 克
- 毛豆 单位 克
- 花生 单位 克
- 白萝卜 单位 个
- 黄瓜 单位 根
- 西红柿 单位 个
- 青椒 单位 个
- 洋葱 单位 个
- 圆茄子 单位 个
- 香菇 单位 个
- 木耳 单位 克
- 海带 单位 克
- 玉米油 单位 毫升
- 亚麻籽油 单位 毫升
- 葵花籽油（高油酸77%） 单位 毫升
- 芝麻油 单位 毫升
- 花生油（高油酸75%） 单位 毫升

### 3.3. 我的食材库 (My Pantry/Inventory)

用户将购买的食材录入此处，作为个人专属的库存。

- **入库操作**:
  - 用户从“食物营养数据库”中搜索并选择食物。
  - **录入方式**: 用户可以选择按“重量”（如 500克）或按“默认单位”（如 3个）添加入库。系统会自动计算并存入总克重。
- **库存管理**:
  - 列表形式展示所有库存食材，清晰显示剩余克重。
  - 用户可以手动调整或删除库存。

### 3.4. 每日饮食记录 (Daily Meal Logging)

记录每日三餐及加餐。

- **记录流程**:
  - 用户选择餐次（早餐/午餐/晚餐/加餐）。
  - 从“我的食材库”中选择消耗的食材。
  - 输入消耗量（按“克”或按“默认单位”）。
  - 系统自动从库存中扣减相应克重，并累加当日营养摄入。

### 3.5. 仪表盘 & 分析建议 (Dashboard & Insights)

应用主页，提供当日健康数据快照和分析。

- **数据展示**:
  - **能量平衡**: 清晰展示 `总摄入` vs `总消耗` (静息+运动)，并计算 `能量差值`。
  - **宏量营养素分析**: 展示三大营养素的摄入克数和供能占比，并根据体重提示蛋白质摄入是否达标。
  - **抗炎饮食追踪**: 统计当日饮食的抗炎/促炎食物比例。
- **智能建议**:
  - 基于能量差值、宏量营养素、抗炎指数，给出简单明确的行动建议。
  - 基于饮食多样性，提示“增加蔬菜摄入”或“尝试不同种类的蛋白质”等。

### 3.6. 数据导出为AI提示词 (Export for AI)

- **功能**: 提供一个“导出今日总结”按钮。
- **输出格式**: 生成一段预设格式的Markdown文本，方便用户复制并粘贴到其他AI助手中获取专业建议。
- **模板**:
  ```markdown
  # 我的健康与饮食日记 - [日期]

  ## 个人档案
  - 年龄: [年龄], 性别: [性别], 身高: [身高]cm
  - 体重: [体重]kg, 体脂率: [体脂率]%

  ## 能量平衡分析
  - 今日摄入: [总摄入] kcal
  - 静息消耗: [静息消耗] kcal
  - 运动消耗: [运动消耗] kcal
  - **能量净值**: [能量差值] kcal

  ## 宏量营养素摄入
  - 蛋白质: [蛋白质]g
  - 碳水化合物: [碳水]g
  - 脂肪: [脂肪]g

  ## 今日食谱
  - [食物1]: [克重]g
  - [食物2]: [克重]g
  - ...

  **我的目标**: [减肥/增肌/改善抗炎指数]
  **请基于以上数据，为我提供专业的饮食和健康建议。**
  ```

## 4. 非功能性需求

- **平台**: 移动端优先的H5应用。
- **离线能力 (PWA)**: 应用需作为渐进式网络应用（PWA）开发，核心功能（如数据录入、查看）在离线状态下必须可用。
- **UI/UX**: 界面简洁、数据可视化清晰、操作流程（特别是记录饮食）必须高效。
- **数据存储**: 所有数据均存储在浏览器 `localStorage` 中，无需后端。
- **性能**: 快速响应，计算无延迟。

## 5. 技术栈与架构

- **架构**: **PWA (Progressive Web App)**，利用 Service Workers 实现离线缓存和访问。
- **前端框架**: React
- **开发语言**: TypeScript
- **构建工具**: Vite
- **UI 库**: Shadcn/UI + Tailwind CSS
- **图表库**: Recharts
- **状态管理**: Zustand 或 React Context (用于管理全局状态)


